<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cognitech Labs Inbox</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .b-divider {
            width: 100%;
            height: 3rem;
            background-color: rgba(0, 0, 0, .1);
            border: solid rgba(0, 0, 0, .15);
            border-width: 1px 0;
            box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
        }

        .b-vr {
            flex-shrink: 0;
            width: 3rem;
            height: 100vh;
        }

        .sidebar {
            width: 350px;
        }

        .active {
            background-color: red;
            border-color: red;
            color: white;
        }
    </style>

</head>

<body>

    <main class="d-flex flex-nowrap vh-100">
        <div class="d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary sidebar">
            <a href="/"
                class="d-flex align-items-center flex-shrink-0 p-3 link-body-emphasis text-decoration-none border-bottom">
                <span class="fs-5 fw-semibold">Cognitech Labs Inbox</span>
            </a>
            <div class="list-group list-group-flush border-bottom scrollarea overflow-y-scroll" id="previews"></div>
        </div>
        <div class="b-divider b-vr"></div>
        <div class="d-flex flex-column w-100 container">
            <header class="d-flex align-items-center pb-3 border-bottom">
                <a href="/" class="d-flex align-items-center text-body-emphasis text-decoration-none">
                    <h1 class="mt-3" id="email-subject"></span>
                </a>
            </header>

            <h5 id="email-sender" class="mt-3"></h5>
            <p class="d-flex justify-content-between w-100">
                <span>
                    <span>To: </span>
                    <span id="email-recipients">[Recipient];</span>
                </span>

                <span class="me-2">
                    <span id="email-day"></span>
                    <span id="email-date"></span>
                    <span id="email-time"></span>
                </span>
            </p>
            <p id="email-body">[Body] </p>
        </div>

        <div class="b-divider b-vr"></div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        const contacts = [
            {
                'id': 0,
                'name': 'Justine Panetta',
                'email': 'ceo@cognitech.com.au'
            },
            {
                'id': 1,
                'name': 'Dr Alan Curing',
                'email': 'alancuring@cognitech-labs.org'
            },
            {
                'id': 2,
                'name': 'Bill Gatekeeper',
                'email': 'billiamgatekeepernickel@cognitech-labs.org'
            }
        ]
        const emails = [
            { // Email 1 - Overview of secret project
                'date': '2036-04-17T07:14:38.137Z',
                'subject': 'Top Secret Vision: Mind-Melding Neural Interface!',
                'sender': 1,
                'recipients': [0],
                'body': `Dear Justine,

                    In utmost confidentiality, I've conceived a groundbreaking idea: a top-secret mind-melding neural interface. This concept envisions seamless communication and data exchange between humans and machines, pushing the boundaries of human-computer interaction.

                    Imagine the possibilities across education, healthcare, and more, all while maintaining the utmost secrecy and discretion.

                    I'm excited about the potential of this project and would appreciate the opportunity to discuss it further behind closed doors. Let's explore how we can turn this vision into a game-changing reality while safeguarding our innovative edge.

                    Awaiting your discreet feedback on this transformative endeavor.

                    Best regards,
                    Alan Curing`,
                'attachments': []
            },
            { // Email 2 -- We'll need to volunteers
                'date': '2037-05-23T11:12:12.000Z',
                'subject': 'Exciting Update: Secret Project Details',
                'sender': 1,
                'recipients': [0],
                'body': `Hey Justine,

                    Following up on our previous chat, I've made some headway on that revolutionary project idea. It involves some potentially *intrusive* neural interfaces but has massive potential.

                    I'll need volunteers soon for a preliminary testing phase. Can't share all the details yet, but it's going to be groundbreaking. Your support and guidance are invaluable as always.

                    Let's discuss further when we meet. Excited to share more!

                    Cheers,
                    Alan`,
                'attachments': []
            },
            { // Email 3 -- Breakthrough with the project
                'date': '2039-12-24T17:10:20.000Z',
                'subject': 'Huge Breakthrough!',
                'sender': 1,
                'recipients': [0],
                'body': `Hey Justine,

                    Guess who's burning the midnight oil? Yours truly! I couldn't contain my excitement and had to share some awesome news. We've hit a major jackpot with our project!

                    Picture me doing a victory dance in the lab because our latest tests? They're like finding out your favorite snack also does your taxes. This thing can adapt to neural feedback like a chameleon on roller skates. Personalization? Off the charts!

                    Let's grab coffee and geek out about this soon. I'll even bring the fancy mugs.

                    Excitedly,
                    Alan`,
                'attachments': []
            },
            { // Email 4 -- CSO to CEO, concerns about alan coming in alte
                'date': '2039-12-28T09:45:10.000Z',
                'subject': 'Alan\'s Midnight Chronicles: A Holiday Edition?',
                'sender': 2,
                'recipients': [1],
                'body': `Hi Justine,

                    Just a heads-up about Alan's legendary dedication— he even snuck into the lab on Christmas! While I admire his commitment, I fear we're nurturing a lab-dwelling nocturnal superhero. We might catch him one day coding with mistletoe on his head!

                    Let's ensure Alan doesn't become a holiday elf permanently glued to his workstation. A sprinkle of work-life balance could be our secret gift to him. How about we lure him out with the promise of eggnog and a mini Yule log?

                    Also I was thinking of upgrading our web security, especially for these emails, I'm going to try figure out a way to stop our email website from getting crawled on google. 

                    Anyway, thanks for watching over our holiday lab rat.

                    Best,
                    Bill`,
                'attachments': []
            },
            { // Email 5 -- Some tiny things are playing up
                'date': '2040-10-09T23:15:36.000Z',
                'subject': 'Project Update: Minor Hiccups, Major Confidence',
                'sender': 1,
                'recipients': [0],
                'body': `Dear Justine,

                    I wanted to update you on our mind-melding neural interface project. While we've encountered a few minor hiccups along the way, rest assured, nothing that can't be smoothed out with a touch of genius and a pinch of perseverance.

                    The neural pathways seem to be doing the cha-cha at times, and the emoji translation module occasionally thinks laughter means crying (oops!). However, these are typical teething issues in such groundbreaking endeavors.

                    I'm confident our team can navigate these challenges and emerge with a polished, mind-blowing result. Let's keep pushing the boundaries!

                    Best regards,
                    Alan Curing`,
                'attachments': []
            },
            { // Email 6 -- CEO to Alan with Bill CC'd, I wonder what's this FOR?
                'date': '2041-02-14T16:30:21.000Z',
                'subject': 'Workload Check-In: Keeping the Lab Balanced',
                'sender': 0,
                'recipients': [0, 2],
                'body': `Hi Alan,

                    Just checking in on the workload, especially with our volunteers. Your energy is contagious, but let's make sure we're not powering through like a runaway lab experiment.

                    A little balance goes a long way, like mixing chemicals without explosions! Let's tweak things so we all stay in the safe zone of productivity and sanity.

                    Looking forward to a harmonious lab experience!

                    Best,
                    Justine`,
                'attachments': []
            },
            { // Email 7 -- Email from Alan to CEO
                'date': '2041-02-21T10:24:11.000Z',
                'subject': 'Concerns relating to the project',
                'sender': 1,
                'recipients': [0],
                'body': `Hey Justine,
                
                    With some sacrifices made by our volunteers, we've been able to make some good progress! I've been trying out the interface myself, here's a message I made using it.
                    Check this out:

                    tse cjclsqe hls usr c pwe oq a uaqeid. znp os git jcwuytrwfu vod *swichsf* obo dteq!
                    a uwsgd wp mnq pg opwe eo vedtcjp czgaahkcb, mue wr uop'h wxpcoiw qqcfoiyagacp :d 
                    dlre 2: ufwgxis
                    
                    It's a bit finicky at the moment but we're getting there!
                    
                    Slightly worse,
                    Alan`,
                'attachments': []
            },
            { // Email 8 -- CEO to Alan serious concerns about the safety of the product
                'date': '2041-09-18T14:39:44.000Z',
                'subject': 'Serious Project Concerns',
                'sender': 0,
                'recipients': [1],
                'body': `Dear Alan,

                    I'm gravely concerned about the project's recent developments—it's starting to feel like a horror movie with volunteer guinea pigs. Can't have our lab turning into a mad scientist's lair!

                    Let's schedule a meeting ASAP to discuss before our volunteers start demanding hazard pay. We need to balance progress with keeping everyone alive and sane.

                    Let's address these concerns seriously and with urgency.

                    Best,
                    Justine`,
                'attachments': []
            },
            {  // Email 9 -- Alan not worrying about it, seems uncaring in his pursuit of the technology
                'date': '2041-09-19T11:04:35.000Z',
                'subject': 'Project Status: Everything\'s Fine (Seriously)',
                'sender': 1,
                'recipients': [0],
                'body': `Dear Justine,

                    I understand your concerns, but I assure you, the lab hasn't turned into a B-grade horror flick... yet. Our volunteers are still human, not lab experiments gone wrong.

                    Let's chat soon to ease your worries. Remember, my middle name is "Safety First" (well, not really, but it should be).

                    Thanks for keeping an eye out, but trust me, everything's as stable as a caffeinated scientist.

                    Best,
                    Alan`,
                'attachments': []
            },
            {  // Email 10 -- Final: Justine threatens to shut down the project
                'date': '2042-04-20T11:04:35.000Z',
                'subject': 'Serious Business',
                'sender': 0,
                'recipients': [1],
                'body': `Dear Alan,

                    It's time to close the curtains on our lab drama. No more mad scientist shenanigans—we'll leave that to the B-movie villains.

                    Let's meet to discuss wrapping things up. Remember, when life gives you lab accidents, make lemonade (but don't drink it from a beaker).

                    Your cooperation in this decision is appreciated, even if it means saying goodbye to our potential world-conquering invention.

                    Worst,
                    Justine`,
                'attachments': []
            },
        ]

        function renderEmail(id) {

            const emailPreview = document.getElementById("email-" + id);
            const emailRecipients = document.getElementById("email-recipients");
            const emailSender = document.getElementById("email-sender");
            const emailDay = document.getElementById("email-day");
            const emailDate = document.getElementById("email-date");
            const emailTime = document.getElementById("email-time");
            const emailBody = document.getElementById("email-body");
            const emailSubject = document.getElementById("email-subject");

            const email = emails[id];

            const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const emailDateObject = new Date(email.date)

            let finalBody = "";
            let splits = email.body.trim().split("\n");
            for (let i = 0; i < splits.length; i++) {
                finalBody += splits[i] + "<br>";
            }

            let recipientsHTML = "";
            let recipientsLength = email.recipients.length;
            for (let i = 0; i < recipientsLength; i++) {
                const recipient = contacts[email.recipients[i]];
                recipientsHTML += `<span type="button" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="${recipient.email}">${recipient.name}</span>`;
                if ((i + 1) < recipientsLength) {
                    recipientsHTML += "; ";
                }
            }

            let oldPreview = document.querySelectorAll("a.active")[0];
            if (oldPreview) oldPreview.classList.remove("active");

            emailPreview.classList.add("active");
            emailBody.innerHTML = finalBody;
            emailSubject.innerText = email.subject;
            emailDate.innerText = emailDateObject.toLocaleDateString();
            emailTime.innerText = emailDateObject.toLocaleTimeString();
            emailDay.innerText = days[emailDateObject.getDay()];
            emailSender.innerText = `${contacts[email.sender].name} <${contacts[email.sender].email}>`;
            emailRecipients.innerHTML = recipientsHTML;

            const tooltips = document.querySelectorAll('[data-bs-toggle="tooltip"]')
            for (let i = 0; i < recipientsLength; i++) { 
                new bootstrap.Tooltip(tooltips[i]) 
                // You'll need this: https://www.cs.du.edu/~snarayan/crypt/vigenere.html
            }
            

        }

        function createEmail(email, id) {
            const trimmedBody = email.body.replace(/<[^>]*>?/gm, '').replace(/\n/g, '').replace(/\s\s+/g, ' ').replace(/&nbsp;/g, ' ').substring(0, 60);
            const template = `<a href="#" class="list-group-item list-group-item-action py-3 lh-sm" id="email-${id}" onclick="renderEmail(${id})">
                <span class="pb-1 me-2 text-truncate d-block">${contacts[email.sender].name} - ${contacts[email.sender].email}</span>
                <div class="d-flex w-100 align-items-center justify-content-between">
                <span class="pb-1 me-2 text-truncate">${email.subject}</span>
                <small>${new Date(email.date).toLocaleDateString()}</small>
                </div>
                <div class="col-10 pb-1 small text-truncate">${trimmedBody}</div>
            </a>`;
            document.getElementById("previews").innerHTML += template;
        }
        for (let i = emails.length - 1 ; i >= 0; i--) {
            createEmail(emails[i], i);
        }
        renderEmail(emails.length - 1);

    </script>


</body>

</html>